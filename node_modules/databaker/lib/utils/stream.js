"use strict";

require("core-js/modules/es.promise");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.streamToBuffer = streamToBuffer;
exports.streamToStream = streamToStream;
exports.streamToFile = streamToFile;

var _fs = require("fs");

function streamToBuffer(stream) {
  return new Promise((resolve, reject) => {
    let buffer = Buffer.from("");
    stream.on("data", chunk => buffer = Buffer.concat([buffer, chunk]));
    stream.on("error", e => reject(e));
    stream.on("end", () => resolve(buffer));
    stream.on("close", () => resolve(buffer));
  });
}

function streamToStream(stream, output) {
  return new Promise((resolve, reject) => {
    stream.pipe(output);
    stream.on("error", e => reject(e));
    stream.on("end", () => resolve());
    stream.on("close", () => resolve());
  });
}

function streamToFile(stream, filename) {
  return streamToStream(stream, (0, _fs.createWriteStream)(filename));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy9zdHJlYW0udHMiXSwibmFtZXMiOlsic3RyZWFtVG9CdWZmZXIiLCJzdHJlYW0iLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImJ1ZmZlciIsIkJ1ZmZlciIsImZyb20iLCJvbiIsImNodW5rIiwiY29uY2F0IiwiZSIsInN0cmVhbVRvU3RyZWFtIiwib3V0cHV0IiwicGlwZSIsInN0cmVhbVRvRmlsZSIsImZpbGVuYW1lIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBOztBQUdPLFNBQVNBLGNBQVQsQ0FBd0JDLE1BQXhCLEVBQTJEO0FBQ2hFLFNBQU8sSUFBSUMsT0FBSixDQUFZLENBQUNDLE9BQUQsRUFBVUMsTUFBVixLQUFxQjtBQUN0QyxRQUFJQyxNQUFNLEdBQUdDLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZLEVBQVosQ0FBYjtBQUNBTixJQUFBQSxNQUFNLENBQUNPLEVBQVAsQ0FBVSxNQUFWLEVBQW1CQyxLQUFELElBQVdKLE1BQU0sR0FBR0MsTUFBTSxDQUFDSSxNQUFQLENBQWMsQ0FBQ0wsTUFBRCxFQUFTSSxLQUFULENBQWQsQ0FBdEM7QUFDQVIsSUFBQUEsTUFBTSxDQUFDTyxFQUFQLENBQVUsT0FBVixFQUFvQkcsQ0FBRCxJQUFPUCxNQUFNLENBQUNPLENBQUQsQ0FBaEM7QUFDQVYsSUFBQUEsTUFBTSxDQUFDTyxFQUFQLENBQVUsS0FBVixFQUFpQixNQUFNTCxPQUFPLENBQUNFLE1BQUQsQ0FBOUI7QUFDQUosSUFBQUEsTUFBTSxDQUFDTyxFQUFQLENBQVUsT0FBVixFQUFtQixNQUFNTCxPQUFPLENBQUNFLE1BQUQsQ0FBaEM7QUFDRCxHQU5NLENBQVA7QUFPRDs7QUFFTSxTQUFTTyxjQUFULENBQXdCWCxNQUF4QixFQUEwQ1ksTUFBMUMsRUFBMkU7QUFDaEYsU0FBTyxJQUFJWCxPQUFKLENBQVksQ0FBQ0MsT0FBRCxFQUFVQyxNQUFWLEtBQXFCO0FBQ3RDSCxJQUFBQSxNQUFNLENBQUNhLElBQVAsQ0FBWUQsTUFBWjtBQUNBWixJQUFBQSxNQUFNLENBQUNPLEVBQVAsQ0FBVSxPQUFWLEVBQW9CRyxDQUFELElBQU9QLE1BQU0sQ0FBQ08sQ0FBRCxDQUFoQztBQUNBVixJQUFBQSxNQUFNLENBQUNPLEVBQVAsQ0FBVSxLQUFWLEVBQWlCLE1BQU1MLE9BQU8sRUFBOUI7QUFDQUYsSUFBQUEsTUFBTSxDQUFDTyxFQUFQLENBQVUsT0FBVixFQUFtQixNQUFNTCxPQUFPLEVBQWhDO0FBQ0QsR0FMTSxDQUFQO0FBTUQ7O0FBRU0sU0FBU1ksWUFBVCxDQUFzQmQsTUFBdEIsRUFBd0NlLFFBQXhDLEVBQXlFO0FBQzlFLFNBQU9KLGNBQWMsQ0FBQ1gsTUFBRCxFQUFTLDJCQUFrQmUsUUFBbEIsQ0FBVCxDQUFyQjtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlV3JpdGVTdHJlYW0gfSBmcm9tIFwiZnNcIlxuaW1wb3J0IHsgUmVhZGFibGUsIFdyaXRhYmxlIH0gZnJvbSBcInN0cmVhbVwiXG5cbmV4cG9ydCBmdW5jdGlvbiBzdHJlYW1Ub0J1ZmZlcihzdHJlYW06IFJlYWRhYmxlKTogUHJvbWlzZTxCdWZmZXI+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBsZXQgYnVmZmVyID0gQnVmZmVyLmZyb20oXCJcIilcbiAgICBzdHJlYW0ub24oXCJkYXRhXCIsIChjaHVuaykgPT4gYnVmZmVyID0gQnVmZmVyLmNvbmNhdChbYnVmZmVyLCBjaHVua10pKVxuICAgIHN0cmVhbS5vbihcImVycm9yXCIsIChlKSA9PiByZWplY3QoZSkpXG4gICAgc3RyZWFtLm9uKFwiZW5kXCIsICgpID0+IHJlc29sdmUoYnVmZmVyKSlcbiAgICBzdHJlYW0ub24oXCJjbG9zZVwiLCAoKSA9PiByZXNvbHZlKGJ1ZmZlcikpXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdHJlYW1Ub1N0cmVhbShzdHJlYW06IFJlYWRhYmxlLCBvdXRwdXQ6IFdyaXRhYmxlKTogUHJvbWlzZTx2b2lkPiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgc3RyZWFtLnBpcGUob3V0cHV0KVxuICAgIHN0cmVhbS5vbihcImVycm9yXCIsIChlKSA9PiByZWplY3QoZSkpXG4gICAgc3RyZWFtLm9uKFwiZW5kXCIsICgpID0+IHJlc29sdmUoKSlcbiAgICBzdHJlYW0ub24oXCJjbG9zZVwiLCAoKSA9PiByZXNvbHZlKCkpXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdHJlYW1Ub0ZpbGUoc3RyZWFtOiBSZWFkYWJsZSwgZmlsZW5hbWU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICByZXR1cm4gc3RyZWFtVG9TdHJlYW0oc3RyZWFtLCBjcmVhdGVXcml0ZVN0cmVhbShmaWxlbmFtZSkpXG59XG4iXX0=